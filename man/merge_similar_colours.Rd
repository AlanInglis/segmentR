% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/merge_similar_colours.R
\name{merge_similar_colours}
\alias{merge_similar_colours}
\title{merge_similar_colours}
\usage{
merge_similar_colours(pal, deltaE = 5, space = "lab")
}
\arguments{
\item{pal}{Either a data frame as above or a character/factor vector of
hex colours.}

\item{deltaE}{Numeric ≥ 0. The maximum CIEDE2000 distance for two colours
to be considered the same. Values between 2 and 6 are common; default 5.}

\item{space}{Character. Colour space supplied to \strong{farver} for the
distance calculation (default \code{"lab"}).  Any space recognised by
\code{farver::decode_colour()} is valid.}
}
\value{
A data frame with columns
\emph{\code{group}} – cluster label
\emph{\code{avg_color}} – representative hex colour per group
\emph{\code{freq}} – total pixel count per group,
sorted by descending \code{freq}.
}
\description{
Accepts either
\itemize{
\item a \strong{data frame} with columns
– \code{hex}: valid hexadecimal colour strings
– \code{freq}: integer pixel counts or weights, \strong{or}
\item a \strong{character vector} of hex strings (duplicates allowed).
This function computes the pair-wise perceptual distances
(CIEDE2000) between all colours in the specified colour space
(Lab by default).
Single-linkage hierarchical clustering is then applied and the tree is cut
at height \code{deltaE}.
All colours that fall within the same cluster are merged; their
representative colour is the mean hex value returned by
\code{\link[=avg_hex]{avg_hex()}}, and their frequencies are summed.
}
}
\details{
Collapse perceptually similar colours in an extracted palette.

\emph{Perceptual} merging avoids the arbitrary choice of \emph{k} required by
k-means approaches and is deterministic (no random seeds).
}
\examples{
\dontrun{
img  <- segmentR::read_image_from_url("https://upload.wikimedia.org/wikipedia/en/0/02/Homer_Simpson_2006.png")
pal  <- segmentR::img_to_palette(img, n = 20)          # initial 20-colour palette
pal2 <- merge_similar_colours(pal, deltaE = 4)
print(pal2)
plot_palette(pal2$avg_color)
}

}
\seealso{
\code{\link[=img_to_palette]{img_to_palette()}}, \code{\link[=get_top_col]{get_top_col()}}, \code{\link[=avg_hex]{avg_hex()}}
}
